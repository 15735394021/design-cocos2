{"version":3,"sources":["assets\\script\\groundInit.js"],"names":["cc","Class","Component","properties","hit_audio","type","AudioClip","onLoad","groundJs","node","getComponent","_this","Init","console","log","getLayerNodeFun","Rect1","onLoadSpriteParent","n","LayerName","bo","onLoadYMovieClip","ymc","layerName","name","on","event","audioEngine","play","onLoadSprite","tag0","PolygonCollider","tag","body","addComponent","RigidBody","RigidBodyType","Static","collider","PhysicsPolygonCollider","offset","Points","points","apply","start"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAAC;AACNC,MAAAA,IAAI,EAACL,EAAE,CAACM,SADF;AAEN,iBAAQ;AAFF;AADF,GAHP;AAULC,EAAAA,MAVK,oBAUK;AACN;AACA;AACA;AACA,SAAKC,QAAL,GAAgB,KAAKC,IAAL,CAAUC,YAAV,CAAuB,SAAvB,CAAhB;;AACA,QAAIC,KAAK,GAAG,IAAZ;;AACAA,IAAAA,KAAK,CAACH,QAAN,CAAeI,IAAf,GAAoB,YAAU;AAC1BC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACH,QAAN,CAAeO,eAAf,CAA+B,KAA/B,EAAsCC,KAAlD;AACH,KAHD;;AAIAL,IAAAA,KAAK,CAACH,QAAN,CAAeS,kBAAf,GAAkC,UAASC,CAAT,EAAWC,SAAX,EAAqBC,EAArB,EAAwB,CAAC;AACvD;AACH,KAFD;;AAGAT,IAAAA,KAAK,CAACH,QAAN,CAAea,gBAAf,GAAgC,UAASC,GAAT,EAAaC,SAAb,EAAuBH,EAAvB,EAA0B;AAAC;AACvD,UAAGE,GAAG,CAACE,IAAJ,IAAY,KAAf,EAAqB;AACjBF,QAAAA,GAAG,CAACG,EAAJ,CAAO,OAAP,EAAe,UAASC,KAAT,EAAe;AAC1B1B,UAAAA,EAAE,CAAC2B,WAAH,CAAeC,IAAf,CAAoBjB,KAAK,CAACP,SAA1B,EAAoC,KAApC,EAA0C,GAA1C;AACH,SAFD;AAGH;AACJ,KAND;;AAOA,SAAKI,QAAL,CAAcqB,YAAd,GAA2B,UAASpB,IAAT,EAAce,IAAd,EAAmB;AAAC;AAC3C,UAAGA,IAAI,IAAI,KAAX,EAAiB;AACb,YAAIM,IAAI,GAAGrB,IAAI,CAACC,YAAL,CAAkBV,EAAE,CAAC+B,eAArB,CAAX;;AACA,YAAGD,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAACE,GAAL,IAAY,CAA/B,EAAiC;AAC7B,cAAIC,IAAI,GAAGxB,IAAI,CAACyB,YAAL,CAAkBlC,EAAE,CAACmC,SAArB,CAAX;AACAF,UAAAA,IAAI,CAAC5B,IAAL,GAAYL,EAAE,CAACoC,aAAH,CAAiBC,MAA7B;AACA,cAAIC,QAAQ,GAAG7B,IAAI,CAACyB,YAAL,CAAkBlC,EAAE,CAACuC,sBAArB,CAAf;AACAD,UAAAA,QAAQ,CAACE,MAAT,GAAkBV,IAAI,CAACU,MAAvB;AACAF,UAAAA,QAAQ,CAACG,MAAT,GAAkBX,IAAI,CAACY,MAAvB;AACAJ,UAAAA,QAAQ,CAACK,KAAT;AACH;AACJ;AACJ,KAZD;AAaH,GA3CI;AA6CLC,EAAAA,KA7CK,mBA6CI,CAER,CA/CI,CAiDL;;AAjDK,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        hit_audio:{\r\n            type:cc.AudioClip,\r\n            default:null\r\n        }\r\n    },\r\n\r\n    onLoad () {\r\n        // cc.director.getCollisionManager().enabled = true;\r\n        // cc.director.getCollisionManager().enabledDebugDraw = true;\r\n        // cc.director.getPhysicsManager().enable = true;\r\n        this.groundJs = this.node.getComponent(\"ground2\");\r\n        let _this = this;\r\n        _this.groundJs.Init=function(){\r\n            console.log(\"初始化\");\r\n            console.log(_this.groundJs.getLayerNodeFun(\"map\").Rect1);\r\n        }\r\n        _this.groundJs.onLoadSpriteParent=function(n,LayerName,bo){//onLoadSpriteParent(父节点：Node，图层名：String，是否第一次加载：bool)\r\n            // console.log(_this.groundJs.getLayerNodeFun(\"map\").getComponent(cc.BoxCollider));\r\n        }\r\n        _this.groundJs.onLoadYMovieClip=function(ymc,layerName,bo){//加载动画\r\n            if(ymc.name == \"hk1\"){\r\n                ymc.on(\"sound\",function(event){\r\n                    cc.audioEngine.play(_this.hit_audio,false,0.3);\r\n                })\r\n            }\r\n        }\r\n        this.groundJs.onLoadSprite=function(node,name){//加载图块  onLoadSprite(图块：Node，图层名：String)\r\n            if(name == \"map\"){\r\n                let tag0 = node.getComponent(cc.PolygonCollider);\r\n                if(tag0 != null && tag0.tag == 0){\r\n                    let body = node.addComponent(cc.RigidBody);\r\n                    body.type = cc.RigidBodyType.Static;\r\n                    let collider = node.addComponent(cc.PhysicsPolygonCollider);\r\n                    collider.offset = tag0.offset;\r\n                    collider.Points = tag0.points;\r\n                    collider.apply();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}