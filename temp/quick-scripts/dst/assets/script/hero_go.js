
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/hero_go.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '06c69/yZBZMrKZIrO4yVjGA', 'hero_go');
// script/hero_go.js

"use strict";

var Input = {};
var State = {
  stand: 1,
  attack: 2,
  noPlay: 3
};
cc.Class({
  "extends": cc.Component,
  properties: {
    mycamrea: {
      type: cc.Node,
      "default": null
    },
    groundJsNode: {
      type: cc.Node,
      "default": null
    },
    map: null,
    heroPos: null,
    kit_Audio: {
      type: cc.AudioClip,
      "default": null
    }
  },
  onLoad: function onLoad() {
    window.heroGo = this;

    for (var i = 0; i < Input.length; i++) {
      Input[i] = 0;
    }

    var _this = this;

    _this.rect = null; //人物的基本属性，速度，方向，重力

    this.playing = true; //是否正在游戏中还是在查看背包，查看别的信息时角色不能移动

    this.walk = false;
    this.kit = false;
    this.jump = false;
    this._speed1 = 200;
    this._speed2 = 300;

    if (this.heroPos != null) {
      this.node.setPosition(this.heroPos);
    } else {
      this.node.setPosition(cc.v2(0, 0)); //初始位置
    }

    this.heroState = State.stand;
    this.anima = "hero_idle";
    this._speed = 200;
    this.sp = cc.v2(0, 0); //角色当前移动的方向

    this.heroAnim = this.node.getComponent(cc.Animation);
    this.combo = 0; //是否处于连击状态
    //注册事件监听

    if (cc.director.getPhysicsManager().gravity.y == 0) {
      //未开启重力的键盘监听，没有自由落体
      cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.on_key_down, this); //向系统注册键盘按下事件

      cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.on_key_up, this); //向系统注册键盘抬起事件
    } else {
      //开启重力的键盘监听,有自由落体
      this.herobody = this.node.getComponent(cc.RigidBody); //把刚体保存下来

      this.input_control = 0;
      cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.on_key_down_1, this); //向系统注册键盘按下事件

      cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.on_key_up_1, this); //向系统注册键盘抬起事件
    }
  },
  systemEventOff: function systemEventOff() {
    //注销键盘监听事件
    cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.on_key_down_1, this); //向系统注册键盘按下事件

    cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.on_key_up_1, this); //向系统注册键盘抬起事件

    cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.on_key_down, this); //向系统注册键盘按下事件

    cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.on_key_up, this); //向系统注册键盘抬起事件
  },
  kit_end: function kit_end() {
    this.heroState = State.stand; // this.combo = (this.combo + 1) % 3;
  },
  kit_start: function kit_start() {
    cc.audioEngine.play(this.kit_Audio, false, 0.3);
  },
  setState: function setState(anima) {
    if (this.anima == anima) return;
    this.anima = anima;
    this.heroAnim.play(this.anima);
  },
  on_player_jump: function on_player_jump() {
    //有自由落体时的跳跃
    this.jump = true;
    var v = this.node.getComponent(cc.RigidBody).linearVelocity;

    if (v.y == 0) {
      this.jump = false;
    }

    if (this.jump) {
      return;
    }

    if (this.input_control == -1) {
      this.heroAnim.stop("hero_left");
    } else if (this.input_control == 1) {
      this.heroAnim.stop("hero_right");
    }

    this.direction = 0;
    var v = this.node.getComponent(cc.RigidBody).linearVelocity;
    v.y = 800;
    this.node.getComponent(cc.RigidBody).linearVelocity = v;
  },
  on_player_walk: function on_player_walk(dir) {
    //有自由落体时的行走
    var v = this.node.getComponent(cc.RigidBody).linearVelocity;
    v.x = 300 * dir;
    this.node.getComponent(cc.RigidBody).linearVelocity = v;

    if (this.direction == dir) {
      return;
    }

    this.direction = dir;

    if (dir == 1) {
      this.heroAnim.play("hero_right");
    } else if (dir == -1) {
      this.heroAnim.play("hero_left");
    }
  },
  on_player_stop: function on_player_stop() {
    //有自由落体时停止行走
    if (this.input_control == -1) {
      this.heroAnim.stop("hero_left");
    } else if (this.input_control == 1) {
      this.heroAnim.stop("hero_right");
    }

    this.input_control = 0;
    this.direction = 0;
  },
  on_key_down_1: function on_key_down_1(e) {
    switch (e.keyCode) {
      case 87:
        this.on_player_jump();
        break;

      case 65:
        this.input_control = -1;
        break;

      case 68:
        this.input_control = 1;
        break;

      case 66:
        this.playing = !this.playing;
        game.openAndClosePackage(this.node.getPosition());
        break;
    }
  },
  on_key_up_1: function on_key_up_1(e) {
    switch (e.keyCode) {
      case 65:
        this.on_player_stop();
        break;

      case 68:
        this.on_player_stop();
        break;
    }
  },
  on_key_down: function on_key_down(e) {
    //w:87  s:83   a:65  d:68  j:74  k:75  l:76  u:85  i:73   o:79  shift:16   l:76   空格：32  q:81   t:84
    Input[e.keyCode] = 1;

    switch (e.keyCode) {
      case cc.macro.KEY.l:
        this._speed = this._speed2;
        break;

      case cc.macro.KEY.q:
        //q
        game.noticeExit();
        this.heroState = State.stand;
        break;

      case cc.macro.KEY.b:
        //打开或关闭背包
        this.heroState = this.heroState == State.stand ? State.noPlay : State.stand;
        game.openAndClosePackage(this.mycamrea.getPosition());
        break;

      case cc.macro.KEY.t:
        //关闭对话
        this.closeTalk();
        break;
    }
  },
  closeTalk: function closeTalk() {
    if (cc.find("Canvas/ground/talk")) {
      this.heroState = State.stand;
      cc.find("Canvas/ground/talk").destroy();
    }
  },
  on_key_up: function on_key_up(e) {
    //w:87  s:83   a:65  d:68  j:74  k:75  l:76  u:85  i:73   o:79
    Input[e.keyCode] = 0;

    switch (e.keyCode) {
      case cc.macro.KEY.l:
        this._speed = this._speed1;
        break;
    }
  },
  start: function start() {
    this.groundJs = this.groundJsNode.getComponent(this.map);
    this.groundJs.mapCameraNode = this.mycamrea;
    this.talkNum = 0;
  },
  update: function update(dt) {
    if (this.playing) {
      if (cc.director.getPhysicsManager().gravity.y == 0) {
        var anima = this.anima;
        this.lv = this.node.getComponent(cc.RigidBody).linearVelocity;

        switch (this.heroState) {
          case State.stand:
            if (Input[cc.macro.KEY.j]) {
              this.heroState = State.attack;
            }

            break;
        }

        if (this.heroState == State.attack) {
          if (Input[cc.macro.KEY.j]) {
            if (this.combo == 0) {
              anima = "hero_right_kit";
            } // else if(this.combo == 1){     //连击
            //     anmia = "hero_up_kit";
            // }else if(this.combo == 2){
            //     anima = "hero_down_kit";
            // }

          }
        }

        if (this.heroState != State.stand) {
          this.sp.x = 0;
          this.sp.y = 0;
        } else {
          // this.combo = 0;//取消掉连击
          if (Input[cc.macro.KEY.d]) {
            this.sp.x = 1;
            this.sp.y = 0;
            anima = "hero_right";
            this.node.scaleX = 1;
          } else if (Input[cc.macro.KEY.a]) {
            this.sp.x = -1;
            this.sp.y = 0;
            anima = "hero_right";
            this.node.scaleX = -1;
          } else if (Input[cc.macro.KEY.w]) {
            this.sp.y = 1;
            this.sp.x = 0;
            anima = "hero_up";
          } else if (Input[cc.macro.KEY.s]) {
            this.sp.y = -1;
            this.sp.x = 0;
            anima = "hero_down";
          } else {
            this.sp.y = 0;
            this.sp.x = 0;
            anima = "hero_idle";
          }
        }

        if (this.sp.x) {
          this.lv.y = 0;
          this.lv.x = this.sp.x * this._speed;
        } else if (this.sp.y) {
          this.lv.x = 0;
          this.lv.y = this.sp.y * this._speed;
        } else {
          this.lv.y = 0;
          this.lv.x = 0;
        }

        this.node.getComponent(cc.RigidBody).linearVelocity = this.lv;

        if (anima) {
          this.setState(anima);
        }
      } else {
        if (this.input_control !== 0) {
          this.on_player_walk(this.input_control);
        }
      }
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0XFxoZXJvX2dvLmpzIl0sIm5hbWVzIjpbIklucHV0IiwiU3RhdGUiLCJzdGFuZCIsImF0dGFjayIsIm5vUGxheSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwibXljYW1yZWEiLCJ0eXBlIiwiTm9kZSIsImdyb3VuZEpzTm9kZSIsIm1hcCIsImhlcm9Qb3MiLCJraXRfQXVkaW8iLCJBdWRpb0NsaXAiLCJvbkxvYWQiLCJ3aW5kb3ciLCJoZXJvR28iLCJpIiwibGVuZ3RoIiwiX3RoaXMiLCJyZWN0IiwicGxheWluZyIsIndhbGsiLCJraXQiLCJqdW1wIiwiX3NwZWVkMSIsIl9zcGVlZDIiLCJub2RlIiwic2V0UG9zaXRpb24iLCJ2MiIsImhlcm9TdGF0ZSIsImFuaW1hIiwiX3NwZWVkIiwic3AiLCJoZXJvQW5pbSIsImdldENvbXBvbmVudCIsIkFuaW1hdGlvbiIsImNvbWJvIiwiZGlyZWN0b3IiLCJnZXRQaHlzaWNzTWFuYWdlciIsImdyYXZpdHkiLCJ5Iiwic3lzdGVtRXZlbnQiLCJvbiIsIlN5c3RlbUV2ZW50IiwiRXZlbnRUeXBlIiwiS0VZX0RPV04iLCJvbl9rZXlfZG93biIsIktFWV9VUCIsIm9uX2tleV91cCIsImhlcm9ib2R5IiwiUmlnaWRCb2R5IiwiaW5wdXRfY29udHJvbCIsIm9uX2tleV9kb3duXzEiLCJvbl9rZXlfdXBfMSIsInN5c3RlbUV2ZW50T2ZmIiwib2ZmIiwia2l0X2VuZCIsImtpdF9zdGFydCIsImF1ZGlvRW5naW5lIiwicGxheSIsInNldFN0YXRlIiwib25fcGxheWVyX2p1bXAiLCJ2IiwibGluZWFyVmVsb2NpdHkiLCJzdG9wIiwiZGlyZWN0aW9uIiwib25fcGxheWVyX3dhbGsiLCJkaXIiLCJ4Iiwib25fcGxheWVyX3N0b3AiLCJlIiwia2V5Q29kZSIsImdhbWUiLCJvcGVuQW5kQ2xvc2VQYWNrYWdlIiwiZ2V0UG9zaXRpb24iLCJtYWNybyIsIktFWSIsImwiLCJxIiwibm90aWNlRXhpdCIsImIiLCJ0IiwiY2xvc2VUYWxrIiwiZmluZCIsImRlc3Ryb3kiLCJzdGFydCIsImdyb3VuZEpzIiwibWFwQ2FtZXJhTm9kZSIsInRhbGtOdW0iLCJ1cGRhdGUiLCJkdCIsImx2IiwiaiIsImQiLCJzY2FsZVgiLCJhIiwidyIsInMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBTUEsS0FBSyxHQUFHLEVBQWQ7QUFDQSxJQUFNQyxLQUFLLEdBQUc7QUFDVkMsRUFBQUEsS0FBSyxFQUFDLENBREk7QUFFVkMsRUFBQUEsTUFBTSxFQUFDLENBRkc7QUFHVkMsRUFBQUEsTUFBTSxFQUFDO0FBSEcsQ0FBZDtBQUtBQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsUUFBUSxFQUFDO0FBQ0xDLE1BQUFBLElBQUksRUFBQ0wsRUFBRSxDQUFDTSxJQURIO0FBRUwsaUJBQVE7QUFGSCxLQUREO0FBS1JDLElBQUFBLFlBQVksRUFBQztBQUNURixNQUFBQSxJQUFJLEVBQUNMLEVBQUUsQ0FBQ00sSUFEQztBQUVULGlCQUFRO0FBRkMsS0FMTDtBQVNSRSxJQUFBQSxHQUFHLEVBQUMsSUFUSTtBQVVSQyxJQUFBQSxPQUFPLEVBQUMsSUFWQTtBQVdSQyxJQUFBQSxTQUFTLEVBQUM7QUFDTkwsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNXLFNBREY7QUFFTixpQkFBUTtBQUZGO0FBWEYsR0FIUDtBQW9CTEMsRUFBQUEsTUFwQkssb0JBb0JLO0FBQ05DLElBQUFBLE1BQU0sQ0FBQ0MsTUFBUCxHQUFnQixJQUFoQjs7QUFDQSxTQUFJLElBQUlDLENBQUMsR0FBQyxDQUFWLEVBQVlBLENBQUMsR0FBQ3BCLEtBQUssQ0FBQ3FCLE1BQXBCLEVBQTJCRCxDQUFDLEVBQTVCLEVBQStCO0FBQzNCcEIsTUFBQUEsS0FBSyxDQUFDb0IsQ0FBRCxDQUFMLEdBQVcsQ0FBWDtBQUNIOztBQUNELFFB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QUNMLGVBQUs4QixRQUFMLENBQWM5QixLQUFkO0FBQ0g7QUFDSixPQW5FRCxNQW1FSztBQUNELFlBQUcsS0FBS3FCLGFBQUwsS0FBdUIsQ0FBMUIsRUFBNEI7QUFDeEIsZUFBS2UsY0FBTCxDQUFvQixLQUFLZixhQUF6QjtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBMVFJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IElucHV0ID0ge307XHJcbmNvbnN0IFN0YXRlID0ge1xyXG4gICAgc3RhbmQ6MSxcclxuICAgIGF0dGFjazoyLFxyXG4gICAgbm9QbGF5OjNcclxufVxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG15Y2FtcmVhOntcclxuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBncm91bmRKc05vZGU6e1xyXG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWFwOm51bGwsXHJcbiAgICAgICAgaGVyb1BvczpudWxsLFxyXG4gICAgICAgIGtpdF9BdWRpbzp7XHJcbiAgICAgICAgICAgIHR5cGU6Y2MuQXVkaW9DbGlwLFxyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTG9hZCAoKSB7XHJcbiAgICAgICAgd2luZG93Lmhlcm9HbyA9IHRoaXM7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxJbnB1dC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgSW5wdXRbaV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF90aGlzLnJlY3QgPSBudWxsO1xyXG4gICAgICAgIC8v5Lq654mp55qE5Z+65pys5bGe5oCn77yM6YCf5bqm77yM5pa55ZCR77yM6YeN5YqbXHJcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTsvL+aYr+WQpuato+WcqOa4uOaIj+S4rei/mOaYr+WcqOafpeeci+iDjOWMhe+8jOafpeeci+WIq+eahOS/oeaBr+aXtuinkuiJsuS4jeiDveenu+WKqFxyXG4gICAgICAgIHRoaXMud2FsayA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMua2l0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5qdW1wID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc3BlZWQxID0gMjAwO1xyXG4gICAgICAgIHRoaXMuX3NwZWVkMiA9IDMwMDtcclxuICAgICAgICBpZih0aGlzLmhlcm9Qb3MgIT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5zZXRQb3NpdGlvbih0aGlzLmhlcm9Qb3MpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuc2V0UG9zaXRpb24oY2MudjIoMCwwKSk7Ly/liJ3lp4vkvY3nva5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oZXJvU3RhdGUgPSBTdGF0ZS5zdGFuZDtcclxuICAgICAgICB0aGlzLmFuaW1hID0gXCJoZXJvX2lkbGVcIjtcclxuICAgICAgICB0aGlzLl9zcGVlZCA9IDIwMDtcclxuICAgICAgICB0aGlzLnNwID0gY2MudjIoMCwwKTsgIC8v6KeS6Imy5b2T5YmN56e75Yqo55qE5pa55ZCRXHJcbiAgICAgICAgdGhpcy5oZXJvQW5pbSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICB0aGlzLmNvbWJvID0gMDsvL+aYr+WQpuWkhOS6jui/nuWHu+eKtuaAgVxyXG5cclxuICAgICAgICAvL+azqOWGjOS6i+S7tuebkeWQrFxyXG4gICAgICAgIGlmKGNjLmRpcmVjdG9yLmdldFBoeXNpY3NNYW5hZ2VyKCkuZ3Jhdml0eS55ID09IDApey8v5pyq5byA5ZCv6YeN5Yqb55qE6ZSu55uY55uR5ZCs77yM5rKh5pyJ6Ieq55Sx6JC95L2TXHJcbiAgICAgICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9uKGNjLlN5c3RlbUV2ZW50LkV2ZW50VHlwZS5LRVlfRE9XTix0aGlzLm9uX2tleV9kb3duLHRoaXMpOy8v5ZCR57O757uf5rOo5YaM6ZSu55uY5oyJ5LiL5LqL5Lu2XHJcbiAgICAgICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9uKGNjLlN5c3RlbUV2ZW50LkV2ZW50VHlwZS5LRVlfVVAsdGhpcy5vbl9rZXlfdXAsdGhpcyk7Ly/lkJHns7vnu5/ms6jlhozplK7nm5jmiqzotbfkuovku7ZcclxuICAgICAgICB9ZWxzZXsvL+W8gOWQr+mHjeWKm+eahOmUruebmOebkeWQrCzmnInoh6rnlLHokL3kvZNcclxuICAgICAgICAgICAgdGhpcy5oZXJvYm9keSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuUmlnaWRCb2R5KTsvL+aKiuWImuS9k+S/neWtmOS4i+adpVxyXG4gICAgICAgICAgICB0aGlzLmlucHV0X2NvbnRyb2wgPSAwO1xyXG4gICAgICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sdGhpcy5vbl9rZXlfZG93bl8xLHRoaXMpOy8v5ZCR57O757uf5rOo5YaM6ZSu55uY5oyJ5LiL5LqL5Lu2XHJcbiAgICAgICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9uKGNjLlN5c3RlbUV2ZW50LkV2ZW50VHlwZS5LRVlfVVAsdGhpcy5vbl9rZXlfdXBfMSx0aGlzKTsvL+WQkeezu+e7n+azqOWGjOmUruebmOaKrOi1t+S6i+S7tlxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAgc3lzdGVtRXZlbnRPZmYoKXsgICAvL+azqOmUgOmUruebmOebkeWQrOS6i+S7tlxyXG4gICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9mZihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sdGhpcy5vbl9rZXlfZG93bl8xLHRoaXMpOy8v5ZCR57O757uf5rOo5YaM6ZSu55uY5oyJ5LiL5LqL5Lu2XHJcbiAgICAgICAgY2Muc3lzdGVtRXZlbnQub2ZmKGNjLlN5c3RlbUV2ZW50LkV2ZW50VHlwZS5LRVlfVVAsdGhpcy5vbl9rZXlfdXBfMSx0aGlzKTsvL+WQkeezu+e7n+azqOWGjOmUruebmOaKrOi1t+S6i+S7tlxyXG4gICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9mZihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sdGhpcy5vbl9rZXlfZG93bix0aGlzKTsvL+WQkeezu+e7n+azqOWGjOmUruebmOaMieS4i+S6i+S7tlxyXG4gICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9mZihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX1VQLHRoaXMub25fa2V5X3VwLHRoaXMpOy8v5ZCR57O757uf5rOo5YaM6ZSu55uY5oqs6LW35LqL5Lu2XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBraXRfZW5kKCl7XHJcbiAgICAgICAgdGhpcy5oZXJvU3RhdGUgPSBTdGF0ZS5zdGFuZDtcclxuICAgICAgICAvLyB0aGlzLmNvbWJvID0gKHRoaXMuY29tYm8gKyAxKSAlIDM7XHJcbiAgICB9LFxyXG4gICAga2l0X3N0YXJ0KCl7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLmtpdF9BdWRpbyxmYWxzZSwwLjMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRTdGF0ZShhbmltYSl7XHJcbiAgICAgICAgaWYodGhpcy5hbmltYSA9PSBhbmltYSlyZXR1cm47XHJcbiAgICAgICAgdGhpcy5hbmltYSA9IGFuaW1hO1xyXG4gICAgICAgIHRoaXMuaGVyb0FuaW0ucGxheSh0aGlzLmFuaW1hKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25fcGxheWVyX2p1bXAoKXsvL+acieiHqueUseiQveS9k+aXtueahOi3s+i3g1xyXG4gICAgICAgIHRoaXMuanVtcCA9IHRydWU7XHJcbiAgICAgICAgdmFyIHYgPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlJpZ2lkQm9keSkubGluZWFyVmVsb2NpdHk7XHJcbiAgICAgICAgaWYodi55ID09IDApe1xyXG4gICAgICAgICAgICB0aGlzLmp1bXAgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5qdW1wKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmlucHV0X2NvbnRyb2wgPT0gLTEpe1xyXG4gICAgICAgICAgICB0aGlzLmhlcm9BbmltLnN0b3AoXCJoZXJvX2xlZnRcIik7XHJcbiAgICAgICAgfWVsc2UgaWYodGhpcy5pbnB1dF9jb250cm9sID09IDEpe1xyXG4gICAgICAgICAgICB0aGlzLmhlcm9BbmltLnN0b3AoXCJoZXJvX3JpZ2h0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IDA7XHJcbiAgICAgICAgdmFyIHYgPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlJpZ2lkQm9keSkubGluZWFyVmVsb2NpdHk7XHJcbiAgICAgICAgdi55ID0gODAwO1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuUmlnaWRCb2R5KS5saW5lYXJWZWxvY2l0eSA9IHY7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uX3BsYXllcl93YWxrKGRpcil7Ly/mnInoh6rnlLHokL3kvZPml7bnmoTooYzotbBcclxuICAgICAgICB2YXIgdiA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuUmlnaWRCb2R5KS5saW5lYXJWZWxvY2l0eTtcclxuICAgICAgICB2LnggPSAoMzAwICogZGlyKTtcclxuICAgICAgICB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlJpZ2lkQm9keSkubGluZWFyVmVsb2NpdHkgPSB2O1xyXG4gICAgICAgIGlmKHRoaXMuZGlyZWN0aW9uID09IGRpcil7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcjtcclxuICAgICAgICBpZihkaXIgPT0gMSl7XHJcbiAgICAgICAgICAgIHRoaXMuaGVyb0FuaW0ucGxheShcImhlcm9fcmlnaHRcIik7XHJcbiAgICAgICAgfWVsc2UgaWYoZGlyID09IC0xKXtcclxuICAgICAgICAgICAgdGhpcy5oZXJvQW5pbS5wbGF5KFwiaGVyb19sZWZ0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvbl9wbGF5ZXJfc3RvcCgpey8v5pyJ6Ieq55Sx6JC95L2T5pe25YGc5q2i6KGM6LWwXHJcbiAgICAgICAgaWYodGhpcy5pbnB1dF9jb250cm9sID09IC0xKXtcclxuICAgICAgICAgICAgdGhpcy5oZXJvQW5pbS5zdG9wKFwiaGVyb19sZWZ0XCIpO1xyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMuaW5wdXRfY29udHJvbCA9PSAxKXtcclxuICAgICAgICAgICAgdGhpcy5oZXJvQW5pbS5zdG9wKFwiaGVyb19yaWdodFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbnB1dF9jb250cm9sID0gMDtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IDA7XHJcbiAgICB9LFxyXG4gICAgb25fa2V5X2Rvd25fMShlKXtcclxuICAgICAgICBzd2l0Y2goZS5rZXlDb2RlKXtcclxuICAgICAgICAgICAgY2FzZSA4NzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25fcGxheWVyX2p1bXAoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDY1OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dF9jb250cm9sID0gLTE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA2ODpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRfY29udHJvbCA9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA2NjpcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWluZyA9ICF0aGlzLnBsYXlpbmc7XHJcbiAgICAgICAgICAgICAgICBnYW1lLm9wZW5BbmRDbG9zZVBhY2thZ2UodGhpcy5ub2RlLmdldFBvc2l0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uX2tleV91cF8xKGUpe1xyXG4gICAgICAgIHN3aXRjaChlLmtleUNvZGUpe1xyXG4gICAgICAgICAgICBjYXNlIDY1OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbl9wbGF5ZXJfc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNjg6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uX3BsYXllcl9zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uX2tleV9kb3duKGUpeyAgICAgICAgICAgLy93Ojg3ICBzOjgzICAgYTo2NSAgZDo2OCAgajo3NCAgazo3NSAgbDo3NiAgdTo4NSAgaTo3MyAgIG86NzkgIHNoaWZ0OjE2ICAgbDo3NiAgIOepuuagvO+8mjMyICBxOjgxICAgdDo4NFxyXG4gICAgICAgIElucHV0W2Uua2V5Q29kZV09MTtcclxuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIGNjLm1hY3JvLktFWS5sOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3BlZWQgPSB0aGlzLl9zcGVlZDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkucTogIC8vcVxyXG4gICAgICAgICAgICAgICAgZ2FtZS5ub3RpY2VFeGl0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlcm9TdGF0ZSA9IFN0YXRlLnN0YW5kO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLmI6ICAgLy/miZPlvIDmiJblhbPpl63og4zljIVcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVyb1N0YXRlID0gdGhpcy5oZXJvU3RhdGU9PVN0YXRlLnN0YW5kP1N0YXRlLm5vUGxheTpTdGF0ZS5zdGFuZDtcclxuICAgICAgICAgICAgICAgIGdhbWUub3BlbkFuZENsb3NlUGFja2FnZSh0aGlzLm15Y2FtcmVhLmdldFBvc2l0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgY2MubWFjcm8uS0VZLnQ6ICAgLy/lhbPpl63lr7nor51cclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VUYWxrKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY2xvc2VUYWxrKCl7XHJcbiAgICAgICAgaWYoY2MuZmluZChcIkNhbnZhcy9ncm91bmQvdGFsa1wiKSl7XHJcbiAgICAgICAgICAgIHRoaXMuaGVyb1N0YXRlID0gU3RhdGUuc3RhbmQ7XHJcbiAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvZ3JvdW5kL3RhbGtcIikuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvbl9rZXlfdXAoZSl7ICAgICAgICAvL3c6ODcgIHM6ODMgICBhOjY1ICBkOjY4ICBqOjc0ICBrOjc1ICBsOjc2ICB1Ojg1ICBpOjczICAgbzo3OVxyXG4gICAgICAgIElucHV0W2Uua2V5Q29kZV09MDtcclxuICAgICAgICBzd2l0Y2goZS5rZXlDb2RlKXtcclxuICAgICAgICAgICAgY2FzZSBjYy5tYWNyby5LRVkubDpcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NwZWVkID0gdGhpcy5fc3BlZWQxO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCAoKSB7XHJcbiAgICAgICAgdGhpcy5ncm91bmRKcyA9IHRoaXMuZ3JvdW5kSnNOb2RlLmdldENvbXBvbmVudCh0aGlzLm1hcCk7XHJcbiAgICAgICAgdGhpcy5ncm91bmRKcy5tYXBDYW1lcmFOb2RlID0gdGhpcy5teWNhbXJlYTtcclxuICAgICAgICB0aGlzLnRhbGtOdW0gPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGUgKGR0KSB7XHJcbiAgICAgICAgaWYodGhpcy5wbGF5aW5nKXtcclxuICAgICAgICAgICAgaWYoY2MuZGlyZWN0b3IuZ2V0UGh5c2ljc01hbmFnZXIoKS5ncmF2aXR5LnkgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgYW5pbWEgPSB0aGlzLmFuaW1hO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sdiA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuUmlnaWRCb2R5KS5saW5lYXJWZWxvY2l0eTtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2godGhpcy5oZXJvU3RhdGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuc3RhbmQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKElucHV0W2NjLm1hY3JvLktFWS5qXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlcm9TdGF0ZSA9IFN0YXRlLmF0dGFjaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaGVyb1N0YXRlID09IFN0YXRlLmF0dGFjayl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoSW5wdXRbY2MubWFjcm8uS0VZLmpdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jb21ibyA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hID0gXCJoZXJvX3JpZ2h0X2tpdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgaWYodGhpcy5jb21ibyA9PSAxKXsgICAgIC8v6L+e5Ye7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBhbm1pYSA9IFwiaGVyb191cF9raXRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfWVsc2UgaWYodGhpcy5jb21ibyA9PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGFuaW1hID0gXCJoZXJvX2Rvd25fa2l0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmhlcm9TdGF0ZSAhPSBTdGF0ZS5zdGFuZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcC54ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jb21ibyA9IDA7Ly/lj5bmtojmjonov57lh7tcclxuICAgICAgICAgICAgICAgICAgICBpZihJbnB1dFtjYy5tYWNyby5LRVkuZF0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwLnggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYSA9IFwiaGVyb19yaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUuc2NhbGVYID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihJbnB1dFtjYy5tYWNyby5LRVkuYV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwLnggPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcC55ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWEgPSBcImhlcm9fcmlnaHRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlLnNjYWxlWCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKElucHV0W2NjLm1hY3JvLktFWS53XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3AueSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3AueCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hID0gXCJoZXJvX3VwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoSW5wdXRbY2MubWFjcm8uS0VZLnNdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcC55ID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3AueCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hID0gXCJoZXJvX2Rvd25cIjtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcC55ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcC54ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWEgPSBcImhlcm9faWRsZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnNwLngpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubHYueSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sdi54ID0gdGhpcy5zcC54ICogdGhpcy5fc3BlZWQ7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLnNwLnkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubHYueCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sdi55ID0gdGhpcy5zcC55ICogdGhpcy5fc3BlZWQ7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmx2LnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubHYueCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlJpZ2lkQm9keSkubGluZWFyVmVsb2NpdHkgPSB0aGlzLmx2O1xyXG4gICAgICAgICAgICAgICAgaWYoYW5pbWEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoYW5pbWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaW5wdXRfY29udHJvbCAhPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbl9wbGF5ZXJfd2Fsayh0aGlzLmlucHV0X2NvbnRyb2wpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7XHJcbiJdfQ==