{"version":3,"sources":["assets\\script\\myDrug.js"],"names":["cc","Class","Component","properties","drugName","num","addHp","addMp","drink_audio","type","AudioClip","onLoad","node","on","Node","EventType","MOUSE_ENTER","event","getChildByName","color","Color","scale","MOUSE_LEAVE","active","MOUSE_DOWN","getComponent","Label","string","self","loader","loadRes","SpriteFrame","err","spriteFrame","length","Sprite","onDestroy","releaseRes","useDrug","heroModel","heroLife","width","addLife","audioEngine","play"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        drugName:null,\r\n        num:null,\r\n        addHp:null,\r\n        addMp:null,\r\n        drink_audio:{    //背景音乐\r\n            type:cc.AudioClip,\r\n            default:null\r\n        },\r\n    },\r\n\r\n    onLoad () {\r\n        if(this.drugName == null){\r\n            this.drugName = \"------\";\r\n        }\r\n        if(this.num == null){\r\n            this.num = 0;\r\n        }\r\n        if(this.addHp == null){\r\n            this.addHp = \"000\";\r\n        }\r\n        if(this.addMp == null){\r\n            this.addMp = \"000\";\r\n        }\r\n\r\n        //为每个结点绑定事件\r\n        // 使用枚举类型来注册\r\n        this.node.on(cc.Node.EventType.MOUSE_ENTER, function (event) {  //鼠标移入\r\n            this.node.getChildByName(\"ground\").color = new cc.Color(100,100,100);\r\n            this.node.scale = 1.2;\r\n        }, this);\r\n\r\n        this.node.on(cc.Node.EventType.MOUSE_LEAVE, function (event) { //鼠标移出\r\n            this.node.getChildByName(\"ground\").color = new cc.Color(104,105,91,255);\r\n            this.node.scale = 1;\r\n            this.node.getChildByName(\"used\").active = false;\r\n        }, this);\r\n\r\n        this.node.on(cc.Node.EventType.MOUSE_DOWN, function (event) {  //鼠标点击\r\n            if(this.num == 0){\r\n                this.node.getChildByName(\"used\").getChildByName(\"context\").getComponent(cc.Label).string = \"该药品已经用完了\";\r\n            }\r\n            this.node.getChildByName(\"used\").getChildByName(\"context\").getComponent(cc.Label).string = \"使用该药品吗？\";\r\n            this.node.getChildByName(\"used\").active = true;\r\n        }, this);\r\n\r\n        this.node.getChildByName(\"used\").active = false;\r\n        var self = this;\r\n        cc.loader.loadRes(self.drugName, cc.SpriteFrame, function (err, spriteFrame) {\r\n            if(spriteFrame.length != 0){\r\n                self.node.getChildByName(\"image\").getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n            }\r\n        });\r\n            self.node.getChildByName(\"num\").getComponent(cc.Label).string = self.num;\r\n            self.node.getChildByName(\"name\").getComponent(cc.Label).string = self.drugName;\r\n            self.node.getChildByName(\"content\").getComponent(cc.Label).string = \"hp+:\"+this.addHp+\"\\nmp+:\"+this.addMp;\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.loader.releaseRes(this.drugName, cc.SpriteFrame); //图片资源释放\r\n    },\r\n    useDrug(){\r\n        if(this.num == 0){\r\n            this.node.getChildByName(\"used\").getChildByName(\"context\").getComponent(cc.Label).string = \"该药品已经用完了\";\r\n            return;\r\n        }\r\n        if(heroModel.heroLife.getChildByName(\"bar\").width == 300){\r\n            this.node.getChildByName(\"used\").getChildByName(\"context\").getComponent(cc.Label).string = \"生命值不低于100时无法使用药品\";\r\n            return;\r\n        }\r\n      heroModel.addLife(this.addHp);\r\n      this.num--;\r\n        cc.audioEngine.play(this.drink_audio,false,0.3);\r\n        this.node.getChildByName(\"num\").getComponent(cc.Label).string = this.num;\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}