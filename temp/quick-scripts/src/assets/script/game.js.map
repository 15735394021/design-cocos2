{"version":3,"sources":["assets\\script\\game.js"],"names":["requestUrl","cc","Class","Component","properties","noticeLabel","type","Label","myPackage","Node","onLoad","p","director","getPhysicsManager","enabled","gravity","v2","getCollisionManager","window","game","active","initialization","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","console","log","open","send","queryHeroDetail","openAndClosePackage","pos","setPosition","notice","message","node","getChildByName","opacity","overflow","Overflow","RESIZE_HEIGHT","_contentSize","width","string","noticeExit","openKnapsack","switchMap","oldMap","newMap","start","baseUrl","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nconst requestUrl = \"http://47.104.80.127:8080/\"\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        noticeLabel:{\r\n            type:cc.Label,\r\n            default:null\r\n        },\r\n        myPackage:{\r\n            type:cc.Node,\r\n            default:null\r\n        }\r\n\r\n    },\r\n\r\n    onLoad () {\r\n        let p = cc.director.getPhysicsManager();\r\n        p.enabled = true;\r\n        p.gravity = cc.v2(0,0); \r\n        // p.debugDrawFlags = true;  //显示出来碰撞边框，为了方便演示\r\n        cc.director.getCollisionManager().enabled = true; //检测碰撞\r\n        // cc.director.getCollisionManager().enabledDebugDraw = true;//碰撞检测的边框显示\r\n\r\n        window.game = this;\r\n        // this.initialization();//游戏开始的数据初始化   网络请求\r\n        // this.queryHeroDetail();  //已经在heroDetail.js里调用\r\n\r\n        //通知提示的label初始化时active为false;\r\n        this.noticeLabel.active = false;\r\n        this.myPackage.active = false;//背包初始化不显示\r\n\r\n    },\r\n\r\n\r\n    initialization(){   //进入游戏的个人数据初始化,查背包\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = JSON.parse(xhr.responseText);\r\n                console.log(response);\r\n            }\r\n        };\r\n        xhr.open(\"GET\", requestUrl+\"archives/beginGame?archivesId=1\", true);\r\n        xhr.send();\r\n    },\r\n\r\n    queryHeroDetail(){\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = JSON.parse(xhr.responseText);\r\n                // console.log(response);\r\n            }\r\n        };\r\n        xhr.open(\"GET\", requestUrl+\"archives/queryArchives?userId=1\", true);\r\n        xhr.send();\r\n    },\r\n\r\n    openAndClosePackage(pos){\r\n        this.myPackage.active = !this.myPackage.active;\r\n        if(this.myPackage.active){\r\n            this.myPackage.setPosition(pos);\r\n        }\r\n    },\r\n\r\n    notice(message,pos){  //进入房间的提示“房间没有东西，按q退出”\r\n      this.node.getChildByName(\"map\").opacity = 30;\r\n      this.node.getChildByName(\"hero\").opacity = 30;\r\n      // this.node.addComponent(cc.Label);\r\n      //   let noticeLabel = this.node.getComponent(cc.Label);   //notice打算动态生成的，而不是在this.noticeLabel节点更改\r\n      //       noticeLabel.node.setPosition(pos);\r\n      //   console.log(this.noticeLabel)\r\n      //   console.log(noticeLabel)\r\n        this.noticeLabel.node.setPosition(pos);\r\n        this.noticeLabel.node.active = true;\r\n      this.noticeLabel.overflow = cc.Label.Overflow.RESIZE_HEIGHT;//自适应高度。文字越多，会扩展高度\r\n      this.noticeLabel.node._contentSize.width = 800;\r\n      this.noticeLabel.string = message+\"......  按'q'键退出\";\r\n    },\r\n\r\n    noticeExit(){   //按q键退出的处理\r\n      this.node.getChildByName(\"map\").opacity = 255;\r\n      this.node.getChildByName(\"hero\").opacity = 255;\r\n      // this.node.getComponent(cc.Label).destroy();\r\n        this.noticeLabel.node.active = false;\r\n    },\r\n\r\n    openKnapsack(){   //打开背包\r\n\r\n    },\r\n\r\n    switchMap(oldMap,newMap){\r\n        this.node.getChildByName(oldMap).active = false;\r\n        this.node.getChildByName(newMap).active = true;\r\n    },\r\n\r\n    start () {\r\n        this.baseUrl = \"http://47.104.80.127:8080/\";\r\n    },\r\n\r\n    update (dt) {\r\n    },\r\n});\r\n"]}