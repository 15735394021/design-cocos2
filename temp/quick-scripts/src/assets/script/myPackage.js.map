{"version":3,"sources":["assets\\script\\myPackage.js"],"names":["cc","Class","Component","properties","myDrugsDetail","type","Prefab","myPropDetail","onLoad","myUrl","sys","localStorage","getItem","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","data","console","log","drugs","prop","drug","node","getChildByName","height","i","j","myDrugNode","instantiate","setPosition","v2","length","myDrugJs","getComponent","drugName","num","drugsNum","addHp","hpReply","addMp","mpReply","parent","myPropNode","myPropJs","propName","addSpeed","addHurt","addDefense","bind","open","send","closePackage","hide","active","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        myDrugsDetail:{\r\n            type:cc.Prefab,\r\n            default:null\r\n        },\r\n        myPropDetail:{\r\n            type:cc.Prefab,\r\n            default:null\r\n        }\r\n    },\r\n\r\n    onLoad () {\r\n        let myUrl = cc.sys.localStorage.getItem(\"baseUrl\");\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = JSON.parse(xhr.responseText);\r\n                if(response.status == 0){\r\n                    let data = response.data;\r\n                    console.log(data)\r\n                    this.drugs = data.drugs;\r\n                    this.prop = data.prop;\r\n                    let drug = this.node.getChildByName(\"ScrollView\").getChildByName(\"myDrug\").getChildByName(\"content\");\r\n                    drug.height = 0;\r\n                    for (let i = 0; i < 10; i++) {\r\n                        for (let j = 0; j < 3; j++) {\r\n                            let myDrugNode = cc.instantiate(this.myDrugsDetail);\r\n                            myDrugNode.setPosition(cc.v2(10 + 180*j,-100 - 220*i));\r\n                            if(i*3+(j+1) <= this.drugs.length){\r\n                                let myDrugJs = myDrugNode.getComponent(\"myDrug\");\r\n                                myDrugJs.drugName = \"touxiang\";\r\n                                myDrugJs.num = this.drugs[i*3+j].drugsNum;\r\n                                myDrugJs.addHp = this.drugs[i*3+j].hpReply;\r\n                                myDrugJs.addMp = this.drugs[i*3+j].mpReply;\r\n                            }\r\n                            myDrugNode.parent = drug;\r\n                        }\r\n                        drug.height += 220;\r\n                    }\r\n                    let prop = this.node.getChildByName(\"ScrollView\").getChildByName(\"myProp\").getChildByName(\"content\");\r\n                    prop.height = 0;\r\n                    for (let i = 0; i < 10; i++) {\r\n                        for (let j = 0; j < 3; j++) {\r\n                            let myPropNode = cc.instantiate(this.myPropDetail);\r\n                            myPropNode.setPosition(cc.v2(10 +170*j,-100 - 220*i));\r\n                            if(i*3+(j+1) <= this.prop.length){\r\n                                let myPropJs = myPropNode.getComponent(\"myProp\");\r\n                                myPropJs.propName = \"touxiang\";\r\n                                myPropJs.addSpeed = this.prop[i*3+j].addSpeed;\r\n                                myPropJs.addHurt = this.prop[i*3+j].addHurt;\r\n                                myPropJs.addDefense = this.prop[i*3+j].addDefense;\r\n                            }\r\n                            myPropNode.parent = prop;\r\n                        }\r\n                        prop.height += 220;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }.bind(this);\r\n        xhr.open(\"GET\", myUrl+\"archives/beginGame?archivesId=\"+cc.sys.localStorage.getItem(\"archivesId\"), true);\r\n        xhr.send();\r\n\r\n\r\n    },\r\n    closePackage(){\r\n        this.hide();\r\n    },\r\n    hide:function(){\r\n        this.node.active = false;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}