{"version":3,"sources":["assets\\script\\loading.js"],"names":["cc","Class","Component","properties","m_ProMaxLen","type","Integer","m_Speed","m_Progress","slide","min","max","step","notify","_progressChange","m_ProImage","Node","run_load","ctor","m_progressIng","width","setProgress","pro","m_SetWidth","onLoad","start","update","dt","x","finishCallBack"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,WAAW,EAAC;AACR,iBAAQ,GADA;AAERC,MAAAA,IAAI,EAACL,EAAE,CAACM;AAFA,KADJ;AAKRC,IAAAA,OAAO,EAAC;AACJ,iBAAQ,GADJ;AAEJF,MAAAA,IAAI,EAACL,EAAE,CAACM;AAFJ,KALA;AASRE,IAAAA,UAAU,EAAC;AACPH,MAAAA,IAAI,EAACL,EAAE,CAACM,OADD;AAEP,iBAAQ,CAFD;AAGPG,MAAAA,KAAK,EAAC,IAHC;AAIPC,MAAAA,GAAG,EAAC,CAJG;AAKPC,MAAAA,GAAG,EAAC,GALG;AAMPC,MAAAA,IAAI,EAAC,CANE;AAOPC,MAAAA,MAPO,oBAOC;AACJ,aAAKC,eAAL;AACH;AATM,KATH;AAoBRC,IAAAA,UAAU,EAACf,EAAE,CAACgB,IApBN;AAqBRC,IAAAA,QAAQ,EAAC;AACLZ,MAAAA,IAAI,EAACL,EAAE,CAACgB,IADH;AAEL,iBAAQ;AAFH;AArBD,GAHP;AA8BLE,EAAAA,IAAI,EAAC,gBAAU;AACX,SAAKC,aAAL,GAAqB,KAArB;AACH,GAhCI;AAiCLL,EAAAA,eAAe,EAAC,2BAAU;AACtB,SAAKC,UAAL,CAAgBK,KAAhB,GAAyB,KAAKZ,UAA9B;AACH,GAnCI;AAoCL;AACAa,EAAAA,WAAW,EAAC,qBAASC,GAAT,EAAa;AACrB,QAAKA,GAAG,GAAG,CAAN,IAAWA,GAAG,GAAG,CAAtB,EAAyB;AACrB;AACH;;AACD,QAAIF,KAAK,GAAG,KAAKhB,WAAL,GAAmBkB,GAA/B;;AACA,QAAIF,KAAK,GAAG,KAAKG,UAAjB,EAA6B;AACzB;AACH;;AACD,SAAKA,UAAL,GAAkB,KAAKnB,WAAL,GAAmBkB,GAArC;AAEA,SAAKH,aAAL,GAAqB,IAArB;AACH,GAhDI;AAiDL;AAEAK,EAAAA,MAnDK,oBAmDK;AACN,SAAKT,UAAL,CAAgBK,KAAhB,GAAwB,CAAxB;AAEH,GAtDI;AAwDLK,EAAAA,KAxDK,mBAwDI,CAER,CA1DI;AA4DLC,EAAAA,MA5DK,kBA4DGC,EA5DH,EA4DO;AACR,QAAK,KAAKR,aAAV,EAAyB;AACrB,WAAKF,QAAL,CAAcW,CAAd,GAAkB,CAAC,GAAD,GAAK,KAAKb,UAAL,CAAgBK,KAAvC;;AAEA,UAAI,KAAKL,UAAL,CAAgBK,KAAhB,GAAwB,KAAKG,UAAjC,EAA4C;AACxC,aAAKR,UAAL,CAAgBK,KAAhB,IAAyBO,EAAE,GAAC,KAAKpB,OAAjC;AACH;;AACD,UAAI,KAAKQ,UAAL,CAAgBK,KAAhB,IAAyB,KAAKhB,WAAlC,EAA8C;AAC1C,aAAKe,aAAL,GAAqB,KAArB;;AACA,YAAK,KAAKU,cAAL,IAAuB,IAA5B,EAAiC;AAC7B,eAAKA,cAAL;AACH;AACJ;AACJ;AACJ;AA1EI,CAAT","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_ProMaxLen:{\r\n            default:690,\r\n            type:cc.Integer\r\n        },\r\n        m_Speed:{\r\n            default:690,\r\n            type:cc.Integer\r\n        },\r\n        m_Progress:{\r\n            type:cc.Integer,\r\n            default:0,\r\n            slide:true,\r\n            min:0,\r\n            max:690,\r\n            step:1,\r\n            notify(){\r\n                this._progressChange()\r\n            },\r\n        },\r\n        m_ProImage:cc.Node,\r\n        run_load:{\r\n            type:cc.Node,\r\n            default:null\r\n        }\r\n\r\n    },\r\n    ctor:function(){\r\n        this.m_progressIng = false\r\n    },\r\n    _progressChange:function(){\r\n        this.m_ProImage.width =  this.m_Progress\r\n    },\r\n    //我们规定进度条整体长度百分比.0-1\r\n    setProgress:function(pro){\r\n        if ( pro > 1 || pro < 0 ){\r\n            return\r\n        }\r\n        var width = this.m_ProMaxLen * pro\r\n        if( width < this.m_SetWidth ){\r\n            return\r\n        }\r\n        this.m_SetWidth = this.m_ProMaxLen * pro\r\n\r\n        this.m_progressIng = true\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.m_ProImage.width = 0\r\n\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        if ( this.m_progressIng ){\r\n            this.run_load.x = -390+this.m_ProImage.width;\r\n\r\n            if( this.m_ProImage.width < this.m_SetWidth){\r\n                this.m_ProImage.width += dt*this.m_Speed\r\n            }\r\n            if( this.m_ProImage.width >= this.m_ProMaxLen){\r\n                this.m_progressIng = false\r\n                if ( this.finishCallBack != null){\r\n                    this.finishCallBack()\r\n                }\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}