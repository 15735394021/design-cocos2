{"version":3,"sources":["assets\\script\\groundInit.js"],"names":["cc","Class","Component","properties","hit_audio","type","AudioClip","bg_audio","ready_play","Node","ready_progress","Label","flameParticle","ParticleSystem","hero_pre","Prefab","guai1_pre","topNode","mycamrea","hero","onLoad","p","director","getPhysicsManager","enabled","gravity","v2","getCollisionManager","active","getComponent","ProgressBar","progress","string","groundJs","node","_this","Init","parent","getLayerNodeFun","onLoadSpriteParent","n","LayerName","bo","onLoadYMovieClip","ymc","layerName","name","on","event","audioEngine","play","onLoadSprite","tag0","PolygonCollider","tag","RigidBody","PhysicsPolygonCollider","body","addComponent","RigidBodyType","Static","ps","points","collider","i","length","push","x","y","apply","killSprite","destroy","pp","killSpriteParent","Loading","Loaded","Total","ready_progressNum","start","huaiwu1Init","guai1","g101","initG1","guai2","g102","guai3","g103","guai4","g104","guai5","g105","guai6","g106","guai7","g107","guai8","g108","guai9","g109","guai","guaiNode","instantiate","setPosition","onEnable","onDisable","generate","heroNode","heroNodeJs","groundJsNode","map","initHero","topPosheight","getPosition","heroGo","closeDoor","point1","point2","onDestroy","stopAllEffects","update","dt","viewX","viewY"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        hit_audio: {    //击打时的音效\r\n            type: cc.AudioClip,\r\n            default: null\r\n        },\r\n        bg_audio: {    //背景音乐\r\n            type: cc.AudioClip,\r\n            default: null\r\n        },\r\n        ready_play: {   //游戏加载中的进度条\r\n            type: cc.Node,\r\n            default: null\r\n        },\r\n        ready_progress: {   //游戏加载中的当前进度label\r\n            type: cc.Label,\r\n            default: null\r\n        },\r\n        flameParticle: {   //火焰粒子，用在村庄门口的开门关门效果\r\n            type: cc.ParticleSystem,\r\n            default: null\r\n        },\r\n        hero_pre: {\r\n            type: cc.Prefab,\r\n            default: null\r\n        },\r\n        guai1_pre:{\r\n            type:cc.Prefab,\r\n            default:null\r\n        },\r\n        topNode:{\r\n          type:cc.Node,\r\n          default:null\r\n        },\r\n        mycamrea: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        hero: {\r\n            type: cc.Node,\r\n            default: null\r\n        }\r\n    },\r\n\r\n    onLoad() {\r\n        let p = cc.director.getPhysicsManager();\r\n        p.enabled = true;\r\n        p.gravity = cc.v2(0, 0);\r\n        // p.debugDrawFlags = true;  //显示出来碰撞边框，为了方便演示\r\n        cc.director.getCollisionManager().enabled = true; //检测碰撞\r\n        // cc.director.getCollisionManager().enabledDebugDraw = true;//碰撞检测的边框显示\r\n\r\n        this.ready_play.active = true;\r\n        this.ready_progress.active = true;\r\n        this.ready_play.getComponent(cc.ProgressBar).progress = 0;\r\n        this.ready_progress.string = \"地图正在初始化。。。\";\r\n\r\n        this.groundJs = this.node.getComponent(\"ground2\");\r\n        let _this = this;\r\n        _this.groundJs.Init = function () {\r\n            // _this.groundJs.mapCameraNode = this.mycamrea;\r\n            _this.hero.parent = _this.groundJs.getLayerNodeFun(\"map\");\r\n            // console.log(_this.groundJs.getLayerNodeFun(\"map\").Rect1);\r\n        }\r\n        _this.groundJs.onLoadSpriteParent = function (n, LayerName, bo) {//onLoadSpriteParent(父节点：Node，图层名：String，是否第一次加载：bool)\r\n\r\n        }\r\n        _this.groundJs.onLoadYMovieClip = function (ymc, layerName, bo) {//加载动画\r\n            if (ymc.name == \"hk1\") {\r\n                ymc.on(\"sound\", function (event) {\r\n                    cc.audioEngine.play(_this.hit_audio, false, 0.3);\r\n                })\r\n            }\r\n        }\r\n        this.groundJs.onLoadSprite = function (node, name) { //加载图块时调用  onLoadSprite(图块：Node，图层名：String)\r\n            if (name == \"map\") {\r\n                let tag0 = node.getComponent(cc.PolygonCollider);\r\n                if (tag0 != null && tag0.tag == 0 && node.getComponent(cc.RigidBody) == null && node.getComponent(cc.PhysicsPolygonCollider) == null) {\r\n                    let body = node.addComponent(cc.RigidBody);\r\n                    body.type = cc.RigidBodyType.Static;\r\n                    let ps = tag0.points;\r\n                    let collider = node.addComponent(cc.PhysicsPolygonCollider);\r\n                    for (let i = 0; i < ps.length; i++) {\r\n                        if (i > 3) {\r\n                            collider.points.push({x: ps[i].x, y: ps[i].y});\r\n                        } else {\r\n                            collider.points[i].x = ps[i].x;\r\n                            collider.points[i].y = ps[i].y;\r\n                        }\r\n                    }\r\n                    collider.apply();\r\n                }\r\n            }\r\n            // if(name == \"ground\"){\r\n            //     let guai = node.g101;\r\n            //     if(guai){\r\n            //         console.log(guai)\r\n            //     }\r\n                // let guaiNode = cc.instantiate(this.guai1_pre);\r\n                // guaiNode.parent = _this.groundJs.getLayerNodeFun(\"map\");\r\n                // guaiNode.setPosition(guai);\r\n            // }\r\n        }\r\n        this.groundJs.killSprite = function (node, name) {//每次图块从舞台上清除时调用    killSprite(图块：Node，图层名：String)\r\n            if (name == \"map\") {\r\n                let tag0 = node.getComponent(cc.PolygonCollider);\r\n                if (tag0 != null && tag0.tag == 0) {\r\n                    let body = node.getComponent(cc.RigidBody);\r\n                    if (body != null) {\r\n                        body.destroy();\r\n                    }\r\n                    let pp = node.getComponent(cc.PhysicsPolygonCollider);\r\n                    if (pp != null) {\r\n                        pp.destroy();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.groundJs.killSpriteParent = function (n, LayerName) {// 每次图块父节点从舞台上清除时调用。  killSpriteParent(父图块：Node，图层名：String)\r\n\r\n        }\r\n        this.groundJs.Loading = function (Loaded, Total) {   //Loading(已加载的贴图数：Number，总贴图数：Number)\r\n            let progress = Loaded / Total;\r\n            if (_this.ready_play != null) {\r\n                _this.ready_progressNum = progress;\r\n            }\r\n            if (_this.ready_progress != null) {\r\n                _this.ready_progress.string = \"地图正在创建：\" + progress * 100 + \"%\";\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n    huaiwu1Init(){\r\n            let guai1 = this.groundJs.getLayerNodeFun(\"map\").g101;\r\n            this.initG1(guai1);\r\n        let guai2 = this.groundJs.getLayerNodeFun(\"map\").g102;\r\n        this.initG1(guai2);\r\n        let guai3 = this.groundJs.getLayerNodeFun(\"map\").g103;\r\n        this.initG1(guai3);\r\n        let guai4 = this.groundJs.getLayerNodeFun(\"map\").g104;\r\n        this.initG1(guai4);\r\n        let guai5 = this.groundJs.getLayerNodeFun(\"map\").g105;\r\n        this.initG1(guai5);\r\n        let guai6 = this.groundJs.getLayerNodeFun(\"map\").g106;\r\n        this.initG1(guai6);\r\n        let guai7 = this.groundJs.getLayerNodeFun(\"map\").g107;\r\n        this.initG1(guai7);\r\n        let guai8 = this.groundJs.getLayerNodeFun(\"map\").g108;\r\n        this.initG1(guai8);\r\n        let guai9 = this.groundJs.getLayerNodeFun(\"map\").g109;\r\n        this.initG1(guai9);\r\n    },\r\n    initG1(guai){//初始化史莱姆\r\n        let guaiNode = cc.instantiate(this.guai1_pre);\r\n        guaiNode.parent = this.groundJs.getLayerNodeFun(\"map\");\r\n        guaiNode.setPosition(guai);\r\n    },\r\n\r\n    onEnable(){//active,enable从false变成true\r\n\r\n    },\r\n    onDisable(){//active,enable从true变成false\r\n\r\n    },\r\n\r\n    generate(){//加载英雄预制体进入地图\r\n        let heroNode = cc.instantiate(this.hero_pre);\r\n        let heroNodeJs = heroNode.getComponent(\"hero_go\");\r\n        heroNode.parent = this.groundJs.getLayerNodeFun(\"map\");\r\n        heroNodeJs.mycamrea = this.mycamrea;\r\n        heroNodeJs.groundJsNode = this.node;\r\n        heroNodeJs.map = \"ground2\";\r\n        this.initHero = true;\r\n        this.topPosheight = this.topNode.getPosition().y - heroGo.node.getPosition().y;//界面顶部的top信息，等级，经验，头像等\r\n    },\r\n\r\n    closeDoor(point1,point2){   //关门时的点起火焰粒子\r\n\r\n    },\r\n    onDestroy(){\r\n        cc.audioEngine.stopAllEffects()\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.ready_play != null){\r\n            let progress = this.ready_play.getComponent(cc.ProgressBar).progress;\r\n            if(progress <= this.ready_progressNum){\r\n                progress = progress+0.01;\r\n                this.ready_play.getComponent(cc.ProgressBar).progress = progress;\r\n                if(this.ready_play.getComponent(cc.ProgressBar).progress >= 1 && this.ready_play.getComponent(cc.ProgressBar).progress <= 1.02){\r\n                    this.ready_play.destroy();\r\n                    this.ready_play = null;\r\n                    cc.audioEngine.play(this.bg_audio,true,0.3);\r\n                    this.generate();\r\n                    this.huaiwu1Init();\r\n                }\r\n            }\r\n        }\r\n        if(this.initHero){\r\n            let viewX = heroGo.node.x;\r\n            let viewY = heroGo.node.y;\r\n            if(viewX <= -1850){\r\n                viewX = -1850;\r\n            }\r\n            if(viewX >= 2077){\r\n                viewX = 2077;\r\n            }\r\n            if(viewY >= 1130){\r\n                viewY = 1130;\r\n            }\r\n            if(viewY <= -3160){\r\n                viewY = -3160;\r\n            }\r\n            this.mycamrea.x = viewX;\r\n            this.mycamrea.y = viewY;\r\n            let pp = new cc.v2(viewX,viewY +this.topPosheight);\r\n            this.topNode.setPosition(pp);\r\n        }\r\n\r\n    },\r\n});\r\n"]}