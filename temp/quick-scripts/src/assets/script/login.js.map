{"version":3,"sources":["assets\\script\\login.js"],"names":["cc","Class","Component","properties","m_Account","EditBox","m_PassWord","onLoad","window","g_login","baseUrl","show","node","active","hide","onClickClose","onClickRegister","g_welcome","showRegisterView","onClickLogin","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","console","log","data","sys","localStorage","setItem","id","director","loadScene","bind","open","string","send","start"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAACJ,EAAE,CAACK,OADL;AAERC,IAAAA,UAAU,EAACN,EAAE,CAACK;AAFN,GAHP;AAQL;AAEAE,EAAAA,MAVK,oBAUK;AACNC,IAAAA,MAAM,CAACC,OAAP,GAAiB,IAAjB;AACA,SAAKC,OAAL,GAAe,4BAAf;AACH,GAbI;AAeLC,EAAAA,IAAI,EAAC,gBAAU;AACX,SAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH,GAjBI;AAkBLC,EAAAA,IAAI,EAAC,gBAAU;AACX,SAAKF,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,GApBI;AAqBLE,EAAAA,YAAY,EAAC,wBAAU;AACnB,SAAKD,IAAL;AACH,GAvBI;AAwBLE,EAAAA,eAAe,EAAC,2BAAU;AACtBC,IAAAA,SAAS,CAACC,gBAAV;AACH,GA1BI;AA2BLC,EAAAA,YAAY,EAAC,wBAAU;AAEnB,QAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;;AACAD,IAAAA,GAAG,CAACE,kBAAJ,GAAyB,YAAY;AACjC,UAAIF,GAAG,CAACG,UAAJ,IAAkB,CAAlB,IAAwBH,GAAG,CAACI,MAAJ,IAAc,GAAd,IAAqBJ,GAAG,CAACI,MAAJ,GAAa,GAA9D,EAAoE;AAChE,YAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACQ,YAAf,CAAf;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;;AACA,YAAGA,QAAQ,CAACD,MAAT,IAAmB,CAAtB,EAAwB;AACpB,cAAIO,IAAI,GAAGN,QAAQ,CAACM,IAApB;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACAzB,UAAAA,EAAE,CAACgC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,EAAqCH,IAAI,CAACI,EAA1C;AACAnC,UAAAA,EAAE,CAACoC,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH;AACJ;AACJ,KAXwB,CAWvBC,IAXuB,CAWlB,IAXkB,CAAzB;;AAYAlB,IAAAA,GAAG,CAACmB,IAAJ,CAAS,KAAT,EAAgB,KAAK7B,OAAL,GAAa,oBAAb,GAAkC,KAAKN,SAAL,CAAeoC,MAAjD,GAAwD,gBAAxD,GAAyE,KAAKlC,UAAL,CAAgBkC,MAAzG,EAAiH,IAAjH;AACApB,IAAAA,GAAG,CAACqB,IAAJ;AACAZ,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKpB,OAAL,GAAa,oBAAb,GAAkC,KAAKN,SAAL,CAAeoC,MAAjD,GAAwD,gBAAxD,GAAyE,KAAKlC,UAAL,CAAgBkC,MAArG;AACA,SAAK1B,IAAL;AACH,GA9CI;AA+CL4B,EAAAA,KA/CK,mBA+CI,CAER,CAjDI,CAkDL;;AAlDK,CAAT","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_Account:cc.EditBox,\r\n        m_PassWord:cc.EditBox,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        window.g_login = this;\r\n        this.baseUrl = \"http://47.104.80.127:8080/\";\r\n    },\r\n\r\n    show:function(){\r\n        this.node.active = true\r\n    },\r\n    hide:function(){\r\n        this.node.active = false\r\n    },\r\n    onClickClose:function(){\r\n        this.hide()\r\n    },\r\n    onClickRegister:function(){\r\n        g_welcome.showRegisterView()\r\n    },\r\n    onClickLogin:function(){\r\n\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = JSON.parse(xhr.responseText);\r\n                console.log(response)\r\n                if(response.status == 0){\r\n                    let data = response.data;\r\n                    console.log(response);\r\n                    cc.sys.localStorage.setItem(\"userId\",data.id);\r\n                    cc.director.loadScene(\"game\");\r\n                }\r\n            }\r\n        }.bind(this);\r\n        xhr.open(\"GET\", this.baseUrl+\"user/login?userId=\"+this.m_Account.string+\"&userPassword=\"+this.m_PassWord.string, true);\r\n        xhr.send();\r\n        console.log(this.baseUrl+\"user/login?userId=\"+this.m_Account.string+\"&userPassword=\"+this.m_PassWord.string)\r\n        this.hide()\r\n    },\r\n    start () {\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}