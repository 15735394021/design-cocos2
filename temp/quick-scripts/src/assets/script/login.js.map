{"version":3,"sources":["assets\\script\\login.js"],"names":["cc","Class","Component","properties","m_Account","EditBox","m_PassWord","onLoad","window","g_login","baseUrl","sys","localStorage","setItem","show","node","active","hide","onClickClose","onClickRegister","g_welcome","showRegisterView","onClickLogin","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","JSON","parse","responseText","data","console","log","id","director","loadScene","bind","open","string","send"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAACJ,EAAE,CAACK,OADL;AAERC,IAAAA,UAAU,EAACN,EAAE,CAACK;AAFN,GAHP;AAQLE,EAAAA,MARK,oBAQK;AACNC,IAAAA,MAAM,CAACC,OAAP,GAAiB,IAAjB;AACA,SAAKC,OAAL,GAAe,4BAAf;AACAV,IAAAA,EAAE,CAACW,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,EAAsC,KAAKH,OAA3C;AACH,GAZI;AAcLI,EAAAA,IAAI,EAAC,gBAAU;AACX,SAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH,GAhBI;AAiBLC,EAAAA,IAAI,EAAC,gBAAU;AACX,SAAKF,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,GAnBI;AAoBLE,EAAAA,YAAY,EAAC,wBAAU;AACnB,SAAKD,IAAL;AACH,GAtBI;AAuBLE,EAAAA,eAAe,EAAC,2BAAU;AACtBC,IAAAA,SAAS,CAACC,gBAAV;AACH,GAzBI;AA0BLC,EAAAA,YAAY,EAAC,wBAAU;AAEnB,QAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;;AACAD,IAAAA,GAAG,CAACE,kBAAJ,GAAyB,YAAY;AACjC,UAAIF,GAAG,CAACG,UAAJ,IAAkB,CAAlB,IAAwBH,GAAG,CAACI,MAAJ,IAAc,GAAd,IAAqBJ,GAAG,CAACI,MAAJ,GAAa,GAA9D,EAAoE;AAChE,YAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACQ,YAAf,CAAf;;AACA,YAAGH,QAAQ,CAACD,MAAT,IAAmB,CAAtB,EAAwB;AACpB,cAAIK,IAAI,GAAGJ,QAAQ,CAACI,IAApB;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,EAAjB;AACAnC,UAAAA,EAAE,CAACW,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,EAAqCmB,IAAI,CAACG,EAA1C;AACAnC,UAAAA,EAAE,CAACoC,QAAH,CAAYC,SAAZ,CAAsB,UAAtB;AACH;AACJ;AACJ,KAVwB,CAUvBC,IAVuB,CAUlB,IAVkB,CAAzB;;AAWAf,IAAAA,GAAG,CAACgB,IAAJ,CAAS,KAAT,EAAgB,KAAK7B,OAAL,GAAa,sBAAb,GAAoC,KAAKN,SAAL,CAAeoC,MAAnD,GAA0D,gBAA1D,GAA2E,KAAKlC,UAAL,CAAgBkC,MAA3G,EAAmH,IAAnH;AACAjB,IAAAA,GAAG,CAACkB,IAAJ;AACA,SAAKxB,IAAL;AACH;AA3CI,CAAT","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_Account:cc.EditBox,\r\n        m_PassWord:cc.EditBox,\r\n    },\r\n\r\n    onLoad () {\r\n        window.g_login = this;\r\n        this.baseUrl = \"http://47.104.80.127:8080/\";\r\n        cc.sys.localStorage.setItem(\"baseUrl\",this.baseUrl);\r\n    },\r\n\r\n    show:function(){\r\n        this.node.active = true;\r\n    },\r\n    hide:function(){\r\n        this.node.active = false;\r\n    },\r\n    onClickClose:function(){\r\n        this.hide()\r\n    },\r\n    onClickRegister:function(){\r\n        g_welcome.showRegisterView()\r\n    },\r\n    onClickLogin:function(){\r\n\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = JSON.parse(xhr.responseText);\r\n                if(response.status == 0){\r\n                    let data = response.data;\r\n                    console.log(data.id)\r\n                    cc.sys.localStorage.setItem(\"userId\",data.id);\r\n                    cc.director.loadScene(\"archives\");\r\n                }\r\n            }\r\n        }.bind(this);\r\n        xhr.open(\"GET\", this.baseUrl+\"user/login?userName=\"+this.m_Account.string+\"&userPassword=\"+this.m_PassWord.string, true);\r\n        xhr.send();\r\n        this.hide()\r\n    },\r\n});\r\n"]}